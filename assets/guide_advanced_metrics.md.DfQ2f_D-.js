import{_ as i,c as a,a5 as n,o as t}from"./chunks/framework.Dedzf56s.js";const d=JSON.parse('{"title":"Metrics","description":"","frontmatter":{},"headers":[],"relativePath":"guide/advanced/metrics.md","filePath":"guide/advanced/metrics.md","lastUpdated":1761757106000}'),e={name:"guide/advanced/metrics.md"};function h(k,s,l,p,r,F){return t(),a("div",null,s[0]||(s[0]=[n(`<h1 id="metrics" tabindex="-1">Metrics <a class="header-anchor" href="#metrics" aria-label="Permalink to &quot;Metrics&quot;">​</a></h1><p>To conveniently and thoroughly monitor the performance of your instance of the Iroha network, we recommend using <a href="https://prometheus.io/" target="_blank" rel="noreferrer"><code>Prometheus</code></a>. Prometheus is a program that can monitor your Iroha peer over a separate socket and provide different kinds of performance metrics.</p><p>This data can help you find performance bottlenecks and optimise your Iroha configuration.</p><h4 id="metrics-endpoint" tabindex="-1"><code>/metrics</code> Endpoint <a class="header-anchor" href="#metrics-endpoint" aria-label="Permalink to &quot;\`/metrics\` Endpoint&quot;">​</a></h4><p>See <a href="./../../reference/torii-endpoints.html#metrics">Reference &gt; Torii Endpoints: Metrics</a>.</p><h2 id="how-to-use-metrics" tabindex="-1">How to use metrics <a class="header-anchor" href="#how-to-use-metrics" aria-label="Permalink to &quot;How to use metrics&quot;">​</a></h2><p>Work in Progress.</p><p>This topic will be updated as part of the new configuration reference.</p><p>The progress on the configuration reference can be tracked in the following GitHub issue:<br><a href="https://github.com/hyperledger-iroha/iroha-2-docs/issues/392" target="_blank" rel="noreferrer">iroha-2-docs &gt; Issue #392: Tracking issue for Configuration Reference as per RFC</a>.</p><p>After the above is configured, you can use the IP address set in the <code>&quot;TORII_TELEMETRY_URL&quot;</code> variable to access the metrics data from within a running Iroha instance.</p><p><strong>Example</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://127.0.0.1:8180/metrics</span></span></code></pre></div><p>This returns a result similar to the following:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># HELP accounts User accounts registered at this time</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TYPE accounts gauge</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">accounts</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{domain=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;garden_of_live_flowers&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">accounts</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{domain=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;genesis&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">accounts</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{domain=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;wonderland&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># HELP block_height Current block height</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TYPE block_height counter</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">block_height</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># HELP block_height_non_empty Current count of non-empty blocks</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TYPE block_height_non_empty counter</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">block_height_non_empty</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># HELP commit_time_ms Average block commit time on this peer</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TYPE commit_time_ms histogram</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commit_time_ms_bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{le=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;100&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commit_time_ms_bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{le=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;400&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commit_time_ms_bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{le=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;1600&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commit_time_ms_bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{le=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;6400&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commit_time_ms_bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{le=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;25600&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commit_time_ms_bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{le=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;+Inf&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commit_time_ms_sum</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 13</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commit_time_ms_count</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># HELP connected_peers Total number of currently connected peers</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TYPE connected_peers gauge</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">connected_peers</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># HELP domains Total number of domains</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TYPE domains gauge</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">domains</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># HELP dropped_messages Sumeragi dropped messages</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TYPE dropped_messages counter</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dropped_messages</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># HELP last_commit_time_ms Time (since block creation) it took for the latest block to be committed by this peer</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TYPE last_commit_time_ms gauge</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">last_commit_time_ms</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 13</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># HELP queue_size Number of the transactions in the queue</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TYPE queue_size gauge</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queue_size</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># HELP tx_amount average amount involved in a transaction on this peer</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TYPE tx_amount histogram</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tx_amount_bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{le=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;-1000000000&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tx_amount_bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{le=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;-10000000&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tx_amount_bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{le=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;-100000&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tx_amount_bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{le=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;-1000&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tx_amount_bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{le=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;-10&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tx_amount_bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{le=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;0&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tx_amount_bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{le=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;10&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tx_amount_bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{le=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;1000&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tx_amount_bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{le=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;100000&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tx_amount_bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{le=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;10000000&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tx_amount_bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{le=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;1000000000&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tx_amount_bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{le=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;+Inf&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tx_amount_sum</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 57</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tx_amount_count</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># HELP txs Transactions committed</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TYPE txs counter</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">txs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;accepted&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">txs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;rejected&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">txs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;total&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># HELP uptime_since_genesis_ms Network up-time, from creation of the genesis block</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TYPE uptime_since_genesis_ms gauge</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uptime_since_genesis_ms</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 529270</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># HELP view_changes Number of view changes in the current round</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TYPE view_changes gauge</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">view_changes</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span></code></pre></div>`,14)]))}const g=i(e,[["render",h]]);export{d as __pageData,g as default};
